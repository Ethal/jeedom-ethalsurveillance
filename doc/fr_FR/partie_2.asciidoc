= Configuration

== Onglet Equipement

image::../images/image1.png[]

** *Type de commande* : Type de la commande qui servira à surveiller l'equipement , Logique ou Analogique, 

Commande de l'equipement à surveiller de type "Logique"

** *Commande equipement* : Commande d'etat de l'équipement à surveiller 
** *Temps min de fonctionnement* : Temps de fonctionnement minimun de l'equipement pour générer une alarme, doit etre vide pour ne pas générer d'alarme 
** *Temps max de fonctionnement* : Temps de fonctionnement maximun de l'equipement pour générer une alarme, doit etre vide pour ne pas générer d'alarme

Commande de l'equipement à surveiller de type "Analogique"

** *Commande equipement* : Commande de mesure de puissance de l'équipement à surveiller ou Commande de mesure de puissance générale
** *Compteur Général* : coché si la *Commande equipement* est une mesure de puissance globale de votre logement
** *Heure de fonctionnement pévu* : obligatoire si *Compteur Général* coché
** *Puissance equipement* : obligatoire si *Compteur Général* coché
** *P Mini* : si votre lave linge consomme environ 5W mini pendant un cyle, mettre 5
** *P Maxi* : si votre lave linge consomme environ 100W au demarrage d'un cyle, mettre 100
** *Temps min de fonctionnement* : Temps de fonctionnement minimun de l'equipement pour générer une alarme, doit etre vide pour ne pas générer d'alarme 
** *Temps max de fonctionnement* : Temps de fonctionnement maximun de l'equipement pour générer une alarme, doit etre vide pour ne pas générer d'alarme

== Onglet Commandes

image::../images/image2.png[]

Les commandes sont crées automatiquement à la sauvegarde de l'equipement, il n'est pas possible d'en ajouter.

* *Alarme* : status d'alarme de l'équipement (1 = ALARME, 0 = OFF)
* *Démarré* : heure démarrage de l'équipement
* *Arreté* : heure d'arret de l'équipement	
* *Temps Fct* : Temps de fonctionnement de l'équipement en seconde
* *Temps Fct (H:M:S)* : Temps de fonctionnement de l'équipement au format Heure:Minute:Seconde
* *Etat* : status de surveillance de l'équipement (1 = ON, 0 = OFF)
* *Compteur* : nombre de passage de commande *Etat* de OFF à ON  
* *RAZ Compteur* : remise à zero du compteur

== Fonctionnement

. Mise à jour de la commande *Etat* à ON :

* *Type de commande* : "Logique"
** lors du passage de *Commande équipment* à ON

* *Type de commande* : "Analogique"
** Si *Compteur Général* est coché,
*** Si la *Commande equipement* et que la commande *Etat* est à OFF  
** Si *Compteur Général* n'est pas coché,

. Mise à jour de la commande *Etat* à OFF :
* *Type de commande* : "Logique"
** lors du passage de *Commande équipment* à OFF

. Mise à jour de la commande *Alarme* à ON :

* *Type de commande* : "Logique"
** Si la durée de la commande *Etat* à ON est superieur ou égal au *Temps max de fonctionnement* 
** Si la durée de la commande *Etat* lors du passage de ON à OFF est inferieur ou égal au *Temps min de fonctionnement*

* *Type de commande* : "Analogique"
** Si *Compteur Général* est coché,
*** Si la durée de la commande *Etat* à ON est superieur ou egal au *temps max de fonctionnement* 
*** Si la durée de la commande *Etat*, lors du passage de ON à OFF, est inferieur ou egal au *temps min de fonctionnement*
*** Si la commande *Etat* est a OFF depuis *Heure de fonctionement prévu* plus *Temps min de fonctionnement*
** Si *Compteur Général* n'est pas coché,
*** Si la durée de la commande *Etat* à ON est superieur ou egal au *Temps max de fonctionnement* 
*** Si la durée de la commande *Etat*, lors du passage de ON à OFF, est inferieur ou egal au *Temps min de fonctionnement*

. Mise à jour de la commande *Alarme* à OFF:

* lors du passage de la commande *Etat* de OFF à ON

. Mise à jour des commandes, lors du passage de la commande *Etat* de OFF à ON :

* *Alarme* : passage à OFF
* *Demarré* : heure courante du démarrage
* *Arreté* : '-'
* *Tempts Fct* : 0 seconde 
* *Tempts Fct (H:M:S)* : '00:00:00'
* *Compteur* : Incrémenter de 1
* *Etat* : Passage à ON

. Mise à jour des commandes, lors du passage de la commande *Etat* de ON à OFF : 

* *Alarme* : voir ci dessus
* *Demarré* : pas de changement
* *Arreté* : heure courante de l'arret
* *Tempts Fct* : heure d'arret moins heure de démarrage en seconde 
* *Tempts Fct (H:M:S)* : heure d'arret moins heure de démarrage au format Heure:Minute:Seconde  
* *Compteur* : pas de changement
* *Etat* : Passage à OFF

. Mise à jour des commandes toutes les 5 min :

* *Alarme* : voir ci dessus
* *Demarré* : pas de changement
* *Arreté* : pas de changement
* *Tempts Fct* : heure d'arret moins heure de démarrage en seconde 
* *Tempts Fct (H:M:S)* : heure d'arret moins heure de démarrage au format Heure:Minute:Seconde  
* *Compteur* : pas de changement
* *Etat* : Pas de changement

== Cas d'utilisation
* Surveiller la durée a laquelle votre télévison est allumée

** *Type de commande* : Logique
** *Commande equipement* : mettre la commande etat de la prise qui commande votre télévision
** *Temps min de fonctionnement* : laisser vide
** *Temps max de fonctionnement* : mettre par exemple 70

vous aurez la commande *Alarme* qui passera à 1 ou bout de 70 minutes
le compteur sera incrémenté a chaque a passage a ON de votre commande

* Surveiller son chauffe eau avec la mesure de puissance sur l'arrivé général de votre logement

** *Type de commande* : Analogique
** *Commande equipement* : mettre la commande de mesure de puissance
** *Compteur Général* : coché
** *Heure de fonctionnement pévu* : mettre l'heure à laquelle votre chauffe eau est prévu de démarré (ex :2330)
** *Puissance equipement* : mettre la puissance de votre chauffe eau (ex 2000)
** *P Mini* : laisser vide
** *P Maxi* : laisser vide
** *Temps min de fonctionnement* : mettre par exemple 20
** *Temps max de fonctionnement* : mettre par exemple 240

Vous aurez la commande *Alarme* qui passera à 1 à 00:10(23h30+20 minutes) s'il n'as pas demarré ou si son temps de fonctionnement est inferieur a 20 minutues ou superieur a 4 heures 

* Compter le nombre de cycle de votre lave linge avec une prise avec mesure de consommation

** *Type de commande* : Analogique
** *Commande equipement* : mettre la commande de mesure de puissance du lave linge
** *Compteur Général* : non coché
** *Heure de fonctionnement pévu* : laisser vide
** *Puissance equipement* : laisser vide
** *P Mini* : si votre lave linge consomme environ 5W mini pendant un cyle, mettre 5
** *P Maxi* : si votre lave linge consomme environ 100W au demarrage d'un cyle, mettre 100
** *Temps min de fonctionnement* : laisser vide ou non 
** *Temps max de fonctionnement* : laisser vide ou non

le compteur sera incrementé de 1, la commande *Etat* passera à ON, si la valeur mesure de puissance est superieur à 100W, 
le cycle sera considéré terminé si la mesure de puissance est inferieur à 5W, et la commande *Etat* passera à OFF.

Si les valeurs *Temps min de fonctionnement* ou *Temps max de fonctionnement* ne sont pas vide, la commande *Alarme* passera à ON suivant la valeur de la commande *Temps Fct* 
